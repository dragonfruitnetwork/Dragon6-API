@page
@{
    ViewData["Title"] = "Change Region";
    Layout = "~/Pages/_Layout.cshtml";
}
@using Kendo.Mvc.UI


<h1 class="display-4">Change Region</h1>
<p class="lead">We use your Usage Data to predict what region you play ranked in. If you want to change the region you see, select it from the list below.</p>
<br />
<div class="card text-white bg-info mb-3" onload="getRegion()">
    <div class="card-header">Change Ranked Region</div>
    <div class="card-body">
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Current Region:</label>
            <div class="col-sm-10">
                <p id="currentregion" class="form-control-plaintext text-light">EMEA Region (Assumed)</p>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">New Region:</label>
            <div class="col-sm-10">
                @(Html.Kendo().DropDownList()
      .Name("region")
      .BindTo(Enum.GetNames(typeof(DragonFruit.Six.Core.Regions.Region)))
      .Value("EMEA")
      .HtmlAttributes(new { style = "width:95%;", @class = "form-control" })
                )
            </div>
        </div>
        <div class="btn-group" role="group">
            <button class="btn btn-primary" onclick="saveRegion()" ID="save">Save</button>
            <button class="btn btn-warning" onclick="resetRegion()" ID="reset">Reset</button>

        </div>
        <script>
            function saveRegion() {
                Cookies.set("region", $("#region").val(), { expires: 60000 });
                window.location.href = window.location.origin;
            }
            function resetRegion() {
                Cookies.remove("region");
                                window.location.href = window.location.origin;

    }
    window.addEventListener("load", function () {
        var x = Cookies.get("region");
                if (x !== undefined) {
                    document.getElementById("currentregion").innerHTML = x + " Region";
                }
                
            });
        </script>
    </div>
</div>
<br />